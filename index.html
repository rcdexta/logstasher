<!DOCTYPE html>
<html>
<head>
    <title>Logstasher</title>
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="bower_components/angular-multi-select/angular-multi-select.css">
    <link rel="stylesheet" type="text/css" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="bower_components/ngActivityIndicator/css/ngActivityIndicator.min.css">
    <link href="src/css/style.css" rel="stylesheet" type="text/css">
</head>
<!-- boot angular with the ExampleApp module -->
<body ng-app="LogstasherApp">
<!-- attach the ExampleController to our main content -->
<div ng-controller="ExampleController">

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">

        <form class="navbar-form">

            <div class="row">

                <div class="col-md-1 logstasher">
                    Logstasher
                </div>

                <div class="col-md-5">
                    <multi-select
                            input-model="source_apps"
                            button-label="icon name"
                            item-label="icon name"
                            tick-property="ticked"
                            max-labels="5"
                            on-close="resetAndPaginate()"
                            >
                    </multi-select>
                </div>

                <div class="col-md-4">
                    <div class="input-group search-text">
                        <input type="text" class="form-control transparent " ng-model="search_filter"
                               placeholder="request-id:">
                         <span class="input-group-addon">
                            <i class="fa fa-search"></i>
                        </span>
                    </div>
                </div>

                <div class="col-md-2 clocker">
                    <i class="fa fa-clock-o clock-icon"></i>

                    <select ng-model="duration_in_mins"
                            ng-options="opt as opt.label for opt in duration_options"
                            class="soflow"
                            ng-change="resetAndPaginate()">
                    </select>

                    <a ng-click="resetAndPaginate()">
                        <i class="fa fa-refresh refresh-button"></i>
                    </a>
                </div>

            </div>

        </form>

    </nav>

    <div class="log-container" ng-show="results.length" id="log-container">
        <table st-table="results" st-safe-src="results" st-pagination-scroll st-pipe="paginate"
               class="table table-striped">
            <thead>
            <tr>
                <th st-ratio="10" st-sort="timestamp" st-sort-default="true">Timestamp</th>
                <th st-ratio="5" st-sort="source">App</th>
                <th st-ratio="5" st-sort="request_id">RequestId</th>
                <th st-ratio="80">Content</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="result in results">
                <td st-ratio="10">{{result.timestamp}}</td>
                <td st-ratio="5">{{result.source}}</td>
                <td st-ratio="5">
                    <a ng-href="#?q=request-id:{{result.request_id}}" target="_blank">
                        {{formatRequestId(result.request_id)}}
                    </a>
                </td>
                <td st-ratio="80">{{result.message}}</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div ng-activity-indicator="DottedDark" class="center"></div>

    <div id="footer">
        <div class="stats-count" ng-if="fetch_count">
            <span ng-show="noMoreData">
                End-of-Log |
            </span>
            Fetched: {{fetch_count}}
        </div>
    </div>

</div>

<!-- include bower components in proper order -->
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/elasticsearch/elasticsearch.angular.js"></script>
<script src="bower_components/underscore/underscore-min.js"></script>
<script src="bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>
<script src="bower_components/angular-smart-table/dist/smart-table.min.js"></script>
<script src="bower_components/angular-multi-select/angular-multi-select.js"></script>
<script src="bower_components/moment/min/moment.min.js"></script>
<script src="bower_components/ngActivityIndicator/ngActivityIndicator.min.js"></script>

<script src="src/main.js"></script>
<script src="src/clock.js"></script>
<script src="src/infinitescroll.js"></script>
<script src="src/filter_builder.js"></script>
<script src="src/search.js"></script>

</body>
</html>